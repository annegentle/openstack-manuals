<?xml version="1.0" encoding="UTF-8"?>
<section xml:id="uploading-to-glance"
    xmlns="http://docbook.org/ns/docbook"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0">
    <title>Uploading Images</title>
    <para>First, download some images that are known to work with
        OpenStack. The smallest test image is a tty testing image
        with a username/password of root/password. You can get it
        from http://images.ansolabs.com/tty.tgz. This is the image
        we'll use for this walkthrough.</para>
    <para/>
    <para>Create a directory to house your images.</para>
    <para>mkdir stackimages</para>
    <para>Download the tty image into your images
        directory.</para>
    <para>
        <literallayout>wget -c http://images.ansolabs.com/tty.tgz -O stackimages/tty.tgz</literallayout>
    </para>
    <para>Now expand the image.</para>
    <para>tar -zxf stackimages/tty.tgz -C stackimages/images</para>
    <para>Next, get a token that you use to identify to the Identity
    Service that you can add images. </para>
    <literallayout class="monospaced">curl -d '{"auth":{"passwordCredentials":{"username": "demo", "password": "secretword"}}}' -H "Content-type: application/json" http://localhost:35357/v2.0/tokens
    </literallayout>
    <para>In return, you get a token that you can use for the following commands.</para>
    <para>Now add the kernel image to the Image Service with
        glance add (this token is just an example, get your own):</para>
    <para>
        <literallayout>glance add name="tty-kernel" is_public=true container_format=aki disk_format=aki &lt; stackimages/aki-tty/image
glance add name="tty-ramdisk" is_public=true container_format=ari disk_format=ari &lt; stackimages/ari-tty/image
glance add name="tty" is_public=true container_format=ami disk_format=ami &lt; stackimages/ami-tty/image</literallayout>
    </para>
    
    <para>For other images, you can get Ubuntu Natty (11.04) from http://uec-images.ubuntu.com/natty/current/natty-server-cloudimg-amd64.tar.gz and Ubuntu Oneiric (11.10) at http://uec-images.ubuntu.com/oneiric/current/oneiric-server-cloudimg-amd64.tar.gz.</para>
</section>
